import{r as c}from"./index.Cd_vQiNd.js";import{M as h,f as E,d as v,r as I}from"./siteContent.BjUxXPBG.js";import{a as p}from"./use-transform.C5fcrZ3j.js";function g(n){const e=c.useRef(0),{isStatic:o}=c.useContext(h);c.useEffect(()=>{if(o)return;const s=({timestamp:t,delta:u})=>{e.current||(e.current=t),n(t-e.current,u)};return E.update(s,!0),()=>v(s)},[n])}function w(){const n=p(0);return g(e=>n.set(e)),n}const T={some:0,all:1};function V(n,e,{root:o,margin:s,amount:t="some"}={}){const u=I(n),i=new WeakMap,l=f=>{f.forEach(r=>{const m=i.get(r.target);if(r.isIntersecting!==!!m)if(r.isIntersecting){const d=e(r.target,r);typeof d=="function"?i.set(r.target,d):a.unobserve(r.target)}else typeof m=="function"&&(m(r),i.delete(r.target))})},a=new IntersectionObserver(l,{root:o,rootMargin:s,threshold:typeof t=="number"?t:T[t]});return u.forEach(f=>a.observe(f)),()=>a.disconnect()}function M(n,{root:e,margin:o,amount:s,once:t=!1,initial:u=!1}={}){const[i,l]=c.useState(u);return c.useEffect(()=>{if(!n.current||t&&i)return;const a=()=>(l(!0),t?void 0:()=>l(!1)),f={root:e&&e.current||void 0,margin:o,amount:s};return V(n.current,a,f)},[e,n,o,t,s]),i}function S(n=30){w();const e=p(0),o=1e3/n,s=c.useRef(0);return g(t=>{t-s.current>o&&(e.set(t),s.current=t)}),e}export{S as a,M as u};
